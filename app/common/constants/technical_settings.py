"""
기술적 지표 설정 파일

기술적 지표란?
- 주가의 과거 데이터(가격, 거래량)를 수학적으로 계산해서 만든 지표
- 주가의 방향성, 과매수/과매도 상태, 추세 변화 등을 파악하는데 사용
- 차트에서 선이나 밴드 형태로 표시됨
"""

# =============================================================================
# 모니터링 대상 심볼 및 설정
# =============================================================================

TECHNICAL_SYMBOLS = {
    # 나스닥 선물 (NQ=F)
    # - 나스닥 100 지수를 기초로 한 선물 상품
    # - 24시간 거래되어 실시간 변동성이 큼
    # - 단기 매매에 적합해서 1분, 15분봉으로 모니터링
    "NQ=F": {
        "name": "나스닥 선물",
        "category": "선물",
        "timeframes": ["1min", "15min"],  # 단기 신호 포착용
        "indicators": [
            "MA20",  # 20분/20봉 이동평균선 (단기 추세)
            "MA50",  # 50분/50봉 이동평균선 (중기 추세)
            "RSI",  # 과매수/과매도 지표
            "BOLLINGER",  # 변동성 지표
        ],
        "description": "실시간 변동성이 큰 선물상품으로 단기 기술적 신호에 민감",
    },
    # 나스닥 지수 (^IXIC)
    # - 나스닥에 상장된 모든 종목의 시가총액 가중평균 지수
    # - 장기 투자 관점에서 중요한 지수
    # - 일봉 기준으로 장기 추세 파악
    "^IXIC": {
        "name": "나스닥 지수",
        "category": "지수",
        "timeframes": ["1day"],  # 장기 추세 분석용
        "indicators": [
            "MA50",  # 50일 이동평균선 (중기 추세)
            "MA200",  # 200일 이동평균선 (장기 추세, 가장 중요!)
            "GOLDEN_CROSS",  # 골든크로스 (강력한 상승 신호)
            "DEAD_CROSS",  # 데드크로스 (강력한 하락 신호)
        ],
        "description": "장기 투자 관점에서 중요한 지수로 주요 이동평균선 돌파가 의미있음",
    },
}

# =============================================================================
# 이동평균선 설정
# =============================================================================

# 이동평균선(Moving Average)이란?
# - 일정 기간 동안의 평균 가격을 계산해서 선으로 연결한 것
# - 주가의 잡음(노이즈)을 제거하고 전체적인 추세를 보여줌
# - 주가가 이동평균선 위에 있으면 상승추세, 아래 있으면 하락추세

MA_PERIODS = {
    # 단기 이동평균선들
    "MA5": {
        "period": 5,
        "name": "5일선",
        "description": "매우 단기적인 추세, 잡음이 많아 신뢰도 낮음",
    },
    "MA20": {
        "period": 20,
        "name": "20일선",
        "description": "단기 추세선, 단타매매에서 많이 사용",
    },
    # 중기 이동평균선들
    "MA50": {
        "period": 50,
        "name": "50일선",
        "description": "중기 추세선, 기관투자자들이 많이 참고하는 선",
    },
    "MA60": {
        "period": 60,
        "name": "60일선",
        "description": "분기별 추세, 한국에서 많이 사용",
    },
    # 장기 이동평균선들
    "MA200": {
        "period": 200,
        "name": "200일선",
        "description": "가장 중요한 장기 추세선! 200일선 위=상승장, 아래=하락장",
    },
    "MA300": {
        "period": 300,
        "name": "300일선",
        "description": "초장기 추세선, 매우 강한 지지/저항선 역할",
    },
}

# =============================================================================
# RSI 설정 (Relative Strength Index)
# =============================================================================

# RSI란?
# - 최근 가격 변동에서 상승폭과 하락폭의 비율을 나타내는 지표 (0~100)
# - 70 이상: 과매수 (너무 많이 올라서 조정 가능성)
# - 30 이하: 과매도 (너무 많이 떨어져서 반등 가능성)
# - 50: 중립 (상승/하락 힘이 균형)

RSI_SETTINGS = {
    "period": 14,  # 14일/14봉 기준으로 계산 (일반적인 설정)
    "overbought": 70,  # 과매수 기준선
    "oversold": 30,  # 과매도 기준선
    "neutral": 50,  # 중립선
    "description": {
        "overbought": "70 이상시 과매수 상태, 가격 조정(하락) 가능성 높음",
        "oversold": "30 이하시 과매도 상태, 가격 반등(상승) 가능성 높음",
        "neutral": "50 돌파시 상승 모멘텀, 50 이탈시 하락 모멘텀",
    },
}

# =============================================================================
# 볼린저 밴드 설정 (Bollinger Bands)
# =============================================================================

# 볼린저 밴드란?
# - 이동평균선을 중심으로 위아래로 표준편차만큼 띄운 밴드
# - 가격 변동성을 시각적으로 보여주는 지표
# - 밴드가 좁아지면 곧 큰 움직임, 넓어지면 변동성 증가

BOLLINGER_SETTINGS = {
    "period": 20,  # 20일/20봉 이동평균선 기준
    "std_dev": 2,  # 표준편차 2배 (일반적인 설정)
    "description": {
        "upper_band": "상단 밴드 터치시 과매수, 하락 가능성",
        "lower_band": "하단 밴드 터치시 과매도, 상승 가능성",
        "squeeze": "밴드폭 축소시 곧 큰 변동성 예상",
        "expansion": "밴드폭 확장시 변동성 증가 중",
    },
}

# =============================================================================
# 크로스 신호 설정
# =============================================================================

# 골든크로스 & 데드크로스란?
# - 단기 이동평균선이 장기 이동평균선을 돌파하는 현상
# - 매우 강력한 추세 전환 신호로 여겨짐

CROSS_SIGNALS = {
    "GOLDEN_CROSS": {
        "short_ma": 50,  # 단기선: 50일선
        "long_ma": 200,  # 장기선: 200일선
        "signal": "상승",
        "description": "50일선이 200일선을 위로 돌파 → 강력한 상승 신호! 🚀",
    },
    "DEAD_CROSS": {
        "short_ma": 50,  # 단기선: 50일선
        "long_ma": 200,  # 장기선: 200일선
        "signal": "하락",
        "description": "50일선이 200일선을 아래로 이탈 → 강력한 하락 신호! 💀",
    },
}

# =============================================================================
# 알림 주기 설정 (분 단위)
# =============================================================================

# 같은 신호가 반복적으로 오는 것을 방지하기 위한 설정
# 예: 200일선 돌파 알림을 보낸 후 6시간 동안은 같은 알림 안보냄

ALERT_INTERVALS = {
    # 이동평균선 돌파 알림
    "MA_BREAKOUT": {
        "1min": 30,  # 1분봉: 30분 간격 (단기라서 자주)
        "15min": 120,  # 15분봉: 2시간 간격
        "1day": 1440,  # 일봉: 24시간 간격 (하루 1번)
    },
    # RSI 과매수/과매도 알림
    "RSI_ALERT": {
        "1min": 60,  # 1분봉: 1시간 간격
        "15min": 240,  # 15분봉: 4시간 간격
        "1day": 1440,  # 일봉: 24시간 간격
    },
    # 볼린저 밴드 알림
    "BOLLINGER_ALERT": {
        "1min": 60,  # 1분봉: 1시간 간격
        "15min": 180,  # 15분봉: 3시간 간격
        "1day": 720,  # 일봉: 12시간 간격
    },
    # 크로스 신호 (매우 중요한 신호라서 즉시 알림)
    "CROSS_SIGNAL": {"1day": 60},  # 일봉: 1시간 간격 (중요해서 빨리 재알림)
}

# =============================================================================
# 시간대별 특성 설명
# =============================================================================

TIMEFRAME_INFO = {
    "1min": {
        "name": "1분봉",
        "description": "매우 단기적, 스캘핑/초단타 매매용",
        "pros": "빠른 신호 포착, 실시간성",
        "cons": "잡음 많음, 가짜 신호 빈번",
        "suitable_for": "데이트레이딩, 스캘핑",
    },
    "15min": {
        "name": "15분봉",
        "description": "단기 매매용, 당일~며칠 보유",
        "pros": "1분봉보다 신뢰도 높음, 적당한 실시간성",
        "cons": "여전히 잡음 존재",
        "suitable_for": "단타매매, 스윙트레이딩",
    },
    "1day": {
        "name": "일봉",
        "description": "중장기 투자용, 몇 주~몇 달 보유",
        "pros": "신뢰도 높음, 잡음 적음, 진짜 추세 파악",
        "cons": "신호가 늦음, 실시간성 부족",
        "suitable_for": "중장기 투자, 포지션 트레이딩",
    },
}
