# 기술적 분석 시스템 (Technical Analysis System)

이 프로젝트는 주식 시장의 기술적 지표를 분석하고 투자 신호를 감지하는 종합적인 시스템입니다.

## 🚀 주요 기능

### 1. 기본 기술적 지표

- **이동평균선 (Moving Averages)**

  - SMA (단순이동평균): 5, 10, 21, 50, 100, 200일
  - EMA (지수이동평균): 9, 21, 50일
  - VWAP (거래량가중평균가격)

- **모멘텀 지표**

  - RSI (상대강도지수)
  - MACD (이동평균수렴확산)
  - 스토캐스틱 (Stochastic Oscillator)

- **변동성 지표**
  - 볼린저 밴드 (Bollinger Bands)
  - 거래량 분석

### 2. 고급 분석 기능

- **종합 신호 분석**: 모든 지표를 통합한 종합적 판단
- **시장 심리 분석**: 각 지표별 점수를 종합한 시장 심리 측정
- **신호 감지**: 골든크로스, 데드크로스, 과매수/과매도 등

### 3. 백테스팅 시스템

- **전략 성과 검증**: RSI, MACD, 이동평균 교차 전략
- **리스크 지표**: 샤프 비율, 최대 낙폭, 변동성
- **수익률 분석**: 연간 수익률, 승률, 거래 횟수

### 4. 포트폴리오 분석

- **다중 종목 분석**: 빅테크, ETF, 주요 지수 포트폴리오
- **상관관계 분석**: 종목 간 상관관계 매트릭스
- **섹터 로테이션**: 섹터별 성과 분석 및 순위

### 5. 실시간 모니터링

- **자동 신호 감지**: 주기적 모니터링 및 알림
- **로그 기록**: 신호 발생 이력 저장
- **중복 방지**: 동일 신호 중복 알림 방지

## 📁 파일 구조

```
test_script/
├── README.md                           # 이 파일
├── test_new_moving_averages.py         # 이동평균선 테스트
├── test_new_moving_averages_fixed.py   # 이동평균선 테스트 (수정버전)
├── test_advanced_indicators.py         # 고급 지표 테스트 (MACD, 스토캐스틱, 거래량)
├── test_comprehensive_analysis.py      # 종합 분석 테스트
├── test_backtesting.py                 # 백테스팅 시스템
├── test_portfolio_analysis.py          # 포트폴리오 분석
└── test_realtime_monitoring.py         # 실시간 모니터링
```

## 🔧 사용법

### 1. 기본 지표 테스트

```bash
# 이동평균선 테스트
python test_script/test_new_moving_averages_fixed.py

# 고급 지표 테스트 (MACD, 스토캐스틱, 거래량)
python test_script/test_advanced_indicators.py
```

### 2. 종합 분석

```bash
# 종합 기술적 분석 및 시장 심리 분석
python test_script/test_comprehensive_analysis.py
```

### 3. 백테스팅

```bash
# 다양한 전략의 백테스트 및 성과 비교
python test_script/test_backtesting.py
```

### 4. 포트폴리오 분석

```bash
# 포트폴리오별 분석 및 섹터 로테이션
python test_script/test_portfolio_analysis.py
```

### 5. 실시간 모니터링

```bash
# 실시간 신호 모니터링 (Ctrl+C로 중단)
python test_script/test_realtime_monitoring.py
```

## 📊 분석 대상

### 주요 지수

- **^IXIC**: 나스닥 종합지수
- **^GSPC**: S&P 500
- **^DJI**: 다우존스
- **^RUT**: 러셀 2000
- **^VIX**: 변동성 지수

### ETF

- **QQQ**: 나스닥 ETF
- **SPY**: S&P 500 ETF
- **IWM**: 러셀 2000 ETF
- **VTI**: 전체 시장 ETF
- **ARKK**: 혁신 기술 ETF

### 빅테크 종목

- **AAPL**: Apple
- **MSFT**: Microsoft
- **GOOGL**: Alphabet
- **AMZN**: Amazon
- **TSLA**: Tesla

### 섹터 ETF

- **XLK**: 기술 섹터
- **XLF**: 금융 섹터
- **XLV**: 헬스케어 섹터
- **XLE**: 에너지 섹터
- **XLI**: 산업 섹터
- 기타 7개 섹터

## 🎯 주요 신호

### 이동평균 신호

- **골든 크로스**: 단기 이동평균이 장기 이동평균을 상향 돌파
- **데드 크로스**: 단기 이동평균이 장기 이동평균을 하향 돌파
- **지지/저항**: 가격이 주요 이동평균선에서 반등/저항

### 모멘텀 신호

- **RSI 과매수/과매도**: RSI 70 이상/30 이하
- **MACD 교차**: MACD 라인과 시그널 라인 교차
- **스토캐스틱 신호**: %K와 %D 라인 교차

### 거래량 신호

- **거래량 급증**: 평균 거래량 대비 1.5배 이상
- **거래량 부족**: 평균 거래량 대비 0.5배 이하

## 📈 백테스팅 결과 예시

### 나스닥 지수 (^IXIC) - 2년간

| 전략          | 수익률 | 연간수익률 | 샤프비율 | 최대낙폭 | 승률  |
| ------------- | ------ | ---------- | -------- | -------- | ----- |
| RSI           | +18.3% | +8.8%      | 0.68     | -9.3%    | 50.0% |
| MACD          | +8.6%  | +4.2%      | 0.69     | -4.8%    | 53.8% |
| MA교차(20,50) | -4.3%  | -2.2%      | -0.87    | -5.3%    | 55.6% |

### 최고 성과 전략

- **MACD 전략**: 샤프 비율 0.69로 최고 성과
- **안정성**: 최대 낙폭 -4.8%로 상대적으로 안정적
- **승률**: 53.8%로 양호한 승률

## 🧠 시장 심리 분석

### 점수 체계

각 지표별로 -2 ~ +2 점수 부여:

- **RSI**: 과매도(+2) ~ 과매수(-2)
- **MACD**: 강한 상승(+2) ~ 강한 하락(-2)
- **스토캐스틱**: 과매도(+2) ~ 과매수(-2)
- **이동평균**: 강한 상승추세(+2) ~ 강한 하락추세(-2)
- **거래량**: 증가(+1) ~ 감소(-1)

### 심리 상태 분류

- **매우 강세** (4점 이상): 🚀
- **강세** (2~3점): 📈
- **약간 강세** (1점): 🔼
- **중립** (0점): 🔄
- **약간 약세** (-1점): 🔽
- **약세** (-2~-3점): 📉
- **매우 약세** (-4점 이하): 💥

## 🔄 실시간 모니터링

### 모니터링 주기

- **기본 간격**: 15분
- **신호 감지**: 즉시 알림
- **로그 저장**: `logs/alerts_YYYYMMDD.log`

### 알림 기능

- **신호 발생시**: 텔레그램/이메일 알림 (설정 필요)
- **중복 방지**: 동일 신호 중복 알림 차단
- **상태 추적**: 각 종목별 마지막 신호 기록

## ⚙️ 설정 및 커스터마이징

### 기술적 설정 파일

- `app/common/constants/technical_settings.py`
- 이동평균 기간, RSI 설정, MACD 파라미터 등 조정 가능

### 모니터링 대상 추가

- `test_realtime_monitoring.py`의 `symbols` 딕셔너리 수정
- `test_portfolio_analysis.py`의 `portfolios` 딕셔너리 수정

### 알림 설정

- 텔레그램 봇 토큰 설정
- 이메일 SMTP 설정
- 알림 간격 조정

## 🚨 주의사항

1. **투자 참고용**: 이 시스템은 투자 참고용이며, 실제 투자 결정은 신중히 하시기 바랍니다.
2. **데이터 의존성**: Yahoo Finance API에 의존하므로 데이터 제공 중단시 영향을 받을 수 있습니다.
3. **백테스팅 한계**: 과거 성과가 미래 성과를 보장하지 않습니다.
4. **시장 변동성**: 급격한 시장 변화시 기술적 지표의 신뢰성이 떨어질 수 있습니다.

## 🔮 향후 개발 계획

### 단기 계획

- [ ] 웹 대시보드 개발
- [ ] 더 많은 기술적 지표 추가 (일목균형표, 피보나치 등)
- [ ] 알림 시스템 고도화

### 중기 계획

- [ ] 머신러닝 기반 신호 예측
- [ ] 실시간 차트 시각화
- [ ] 포트폴리오 최적화 알고리즘

### 장기 계획

- [ ] 다양한 자산군 지원 (암호화폐, 원자재 등)
- [ ] 소셜 트레이딩 기능
- [ ] 모바일 앱 개발

## 📞 문의 및 지원

기술적 문의나 개선 제안이 있으시면 언제든지 연락주세요!

---

**면책조항**: 이 시스템은 교육 및 연구 목적으로 개발되었습니다. 실제 투자에 사용하기 전에 충분한 검토와 테스트를 거치시기 바랍니다.
